sharks50 <- c(1,2,5,6,7,8,12,13,23,32,33,34,41,42,43,44,45)
sharks50cols <- sharks50 + 16 #resvars start at 17
sharks50
sharks50 <- c(1,2,5,6,7,8,12,13,23,32,33,35,41,42,43,44,45)
sharks50cols <- sharks50 + 16 #resvars start at 17
35+16
#for (i in c(17,18,21,22,23,24,28,48,49,51,55,57,58,59,60,61,62) { #MAIN SET OF 20 BEST
for (i in c(51,55,57,58,59,60,61,62)) { #MAIN SET OF 20 BEST
gbm.auto(expvar = expvars,
resvar = i,
samples = sharks,
grids = gridsautumn,
shape = mobilebay,
lr = 0.0005,
bf = 0.6,
gaus = TRUE,
savegbm = FALSE,
BnW = FALSE,
simp = TRUE)
}
#for (i in c(17,18,21,22,23,24,28,48,49,51,55,57,58,59,60,61,62) { #MAIN SET OF 20 BEST
for (i in c(59,60,61,62)) { #MAIN SET OF 20 BEST
gbm.auto(expvar = expvars,
resvar = i,
samples = sharks,
grids = gridsautumn,
shape = mobilebay,
lr = 0.0005,
bf = 0.6,
gaus = TRUE,
savegbm = FALSE,
BnW = FALSE,
simp = TRUE)
}
for (i in c(61,62)) { #MAIN SET OF 20 BEST
gbm.auto(expvar = expvars,
resvar = i,
samples = sharks,
grids = gridsautumn,
shape = mobilebay,
lr = 0.0005,
bf = 0.7,
gaus = TRUE,
savegbm = FALSE,
BnW = FALSE,
simp = TRUE)
}
# resvars[14] #check resvar name
# colnames(sharks)[39]
setwd("/home/simon/Dropbox/PostDoc Work/Drymon Froeschke transect BRT/Gbm_auto_runs/PredictRuns/autumn")
#for (i in c(17,18,21,22,23,24,28,48,49,51,55,57,58,59,60,61,62) { #MAIN SET OF 20 BEST
for (i in c(61,62)) { #MAIN SET OF 20 BEST
gbm.auto(expvar = expvars,
resvar = i,
samples = sharks,
grids = gridsautumn,
shape = mobilebay,
lr = 0.0005,
bf = 0.8,
gaus = TRUE,
savegbm = FALSE,
BnW = FALSE,
simp = TRUE)
}
setwd("/home/simon/Dropbox/PostDoc Work/Drymon Froeschke transect BRT/Gbm_auto_runs/PredictRuns/spring")
library(devtools)
install_github("SimonDedman/gbm.auto") # update gbm.auto to latest
library(gbm.auto)
setwd("/home/simon/Dropbox/PostDoc Work/Drymon Froeschke transect BRT")
sharks <- read.csv("SharksIncExtra&HYCOM&QGis.csv")
expvars <- c("Daylength", #need to calculate for grids DONE
"Surface.Temperature", #use these or NOAA ones? These. Histograms are similar and better to use the real data.
"Bottom.Temperature",
# hist(sharks$Surface.Temperature)
# hist(sharks$TempSurf)
"Bottom.DO",
"Longitude",
"Start.Set.Depth",
"SubGrainMM",
"DST_km",
"SalSurf",
"SalBot",
#"TempSurf", #redundant
#"TempBot",
"USurf",
"UBot",
"VSurf",
"VBot",
"WSurf",
"WBot",
"SSH")
"POSdatetimeZ",
setwd("/home/simon/Dropbox/PostDoc Work/Drymon Froeschke transect BRT/SpatialData")
gridswinter <- read.csv("gridswinter2.csv") #read in grids files
gridsspring <- read.csv("gridsspring2.csv")
gridssummer <- read.csv("gridssummer2.csv")
gridsautumn <- read.csv("gridsautumn2.csv")
#gmbauto runs####
# expvars %in% colnames(gridswinter) #precheck expvars in grids
# remember which resvars & gbm run types I'm doing
#singlesex, bin+gaus else bin, 4 seasons.
resvars <- colnames(sharks)[17:62]
library("shapefiles")
mobilebay <- read.shapefile("/home/simon/Dropbox/PostDoc Work/Drymon Froeschke transect BRT/Gbm_auto_runs/PredictRuns/autumn/CroppedMap/Crop_Map")
# setwd("/home/simon/Dropbox/PostDoc Work/Drymon Froeschke transect BRT/Gbm_auto_runs/PredictRuns/winter")
setwd("C:/Users/simon/Dropbox/PostDoc Work/Drymon Froeschke transect BRT/Gbm_auto_runs/PredictRuns/winter")
setwd("/home/simon/Dropbox/PostDoc Work/Drymon Froeschke transect BRT/Gbm_auto_runs/PredictRuns/winter")
for (i in c("F.Atlantic.sharpnose.shark",
"M.Atlantic.sharpnose.shark",
"F.blacknose.shark",
"M.blacknose.shark",
"F.blacktip.shark",
"M.blacktip.shark",
"F.bull.shark",
"M.bull.shark",
"F.sandbar.shark",
"M.sandbar.shark",
"M.scalloped.hammerhead",
"F.smoothhound.sharks",
"F.Southern.stingray",
"F.spinner.shark",
"M.spinner.shark")) {
gbm.auto(expvar = expvars,
resvar = i,
samples = sharks,
grids = gridsautumn,
shape = mobilebay,
lr = 0.0005,
bf = 0.8,
gaus = TRUE,
savegbm = FALSE,
BnW = FALSE,
simp = TRUE)
}
library(devtools)
install_github("SimonDedman/gbm.auto") # update gbm.auto to latest
library(gbm.auto)
setwd("/home/simon/Dropbox/PostDoc Work/Drymon Froeschke transect BRT")
sharks <- read.csv("SharksIncExtra&HYCOM&QGis.csv")
expvars <- c("Daylength", #need to calculate for grids DONE
"Surface.Temperature", #use these or NOAA ones? These. Histograms are similar and better to use the real data.
"Bottom.Temperature",
# hist(sharks$Surface.Temperature)
# hist(sharks$TempSurf)
"Bottom.DO",
"Longitude",
"Start.Set.Depth",
"SubGrainMM",
"DST_km",
"SalSurf",
"SalBot",
#"TempSurf", #redundant
#"TempBot",
"USurf",
"UBot",
"VSurf",
"VBot",
"WSurf",
"WBot",
"SSH")
"POSdatetimeZ",
setwd("/home/simon/Dropbox/PostDoc Work/Drymon Froeschke transect BRT/SpatialData")
gridswinter <- read.csv("gridswinter2.csv") #read in grids files
gridsspring <- read.csv("gridsspring2.csv")
gridssummer <- read.csv("gridssummer2.csv")
gridsautumn <- read.csv("gridsautumn2.csv")
expvars <- c("Daylength", #need to calculate for grids DONE
"Surface.Temperature", #use these or NOAA ones? These. Histograms are similar and better to use the real data.
"Bottom.Temperature",
# hist(sharks$Surface.Temperature)
# hist(sharks$TempSurf)
"Bottom.DO",
"Longitude",
"Start.Set.Depth",
"SubGrainMM",
"DST_km",
"SalSurf",
"SalBot",
#"TempSurf", #redundant
#"TempBot",
"USurf",
"UBot",
"VSurf",
"VBot",
"WSurf",
"WBot",
"SSH")
library("shapefiles")
mobilebay <- read.shapefile("/home/simon/Dropbox/PostDoc Work/Drymon Froeschke transect BRT/Gbm_auto_runs/PredictRuns/autumn/CroppedMap/Crop_Map")
setwd("/home/simon/Dropbox/PostDoc Work/Drymon Froeschke transect BRT/Gbm_auto_runs/PredictRuns/winter")
install.packages("foreach")
install.packages("doMC")
library("doMC", lib.loc="~/R/x86_64-pc-linux-gnu-library/3.5")
detach("package:foreach", unload=TRUE)
library("foreach", lib.loc="~/R/x86_64-pc-linux-gnu-library/3.5")
registerDoMC(8)  #change the 2 to your number of CPU cores  4 laptop 8 pc
foreach(i = c("F.Atlantic.sharpnose.shark",
"M.Atlantic.sharpnose.shark",
"F.blacknose.shark",
"M.blacknose.shark",
"F.blacktip.shark",
"M.blacktip.shark",
"F.bull.shark",
"M.bull.shark",
"F.sandbar.shark",
"M.sandbar.shark",
"M.scalloped.hammerhead",
"F.smoothhound.sharks",
"F.Southern.stingray",
"F.spinner.shark",
"M.spinner.shark")) %dopar% {
# for (i in c("F.Atlantic.sharpnose.shark",
#             "M.Atlantic.sharpnose.shark",
#             "F.blacknose.shark",
#             "M.blacknose.shark",
#             "F.blacktip.shark",
#             "M.blacktip.shark",
#             "F.bull.shark",
#             "M.bull.shark",
#             "F.sandbar.shark",
#             "M.sandbar.shark",
#             "M.scalloped.hammerhead",
#             "F.smoothhound.sharks",
#             "F.Southern.stingray",
#             "F.spinner.shark",
#             "M.spinner.shark")) {
gbm.auto(expvar = expvars,
resvar = i,
samples = sharks,
grids = gridswinter,
shape = mobilebay,
lr = 0.0005,
bf = 0.8,
gaus = TRUE,
savegbm = FALSE,
BnW = FALSE,
simp = TRUE)
}
setwd("/home/simon/Dropbox/PostDoc Work/Drymon Froeschke transect BRT/Gbm_auto_runs/PredictRuns/winter")
gbm.auto(expvar = expvars,
resvar = "M.scalloped.hammerhead",
samples = sharks,
grids = gridswinter,
shape = mobilebay,
lr = 0.0005,
bf = 0.8,
gaus = TRUE,
savegbm = FALSE,
BnW = FALSE,
simp = TRUE)
setwd("/home/simon/Dropbox/PostDoc Work/Drymon Froeschke transect BRT/Gbm_auto_runs/PredictRuns/summer")
registerDoMC(16)
writeLines(c(""), "log.txt")
foreach(i = c("F.Atlantic.sharpnose.shark",
"M.Atlantic.sharpnose.shark",
"F.blacknose.shark",
"M.blacknose.shark",
"F.blacktip.shark",
"M.blacktip.shark",
"F.bull.shark",
"M.bull.shark",
"F.sandbar.shark",
"M.sandbar.shark",
"M.scalloped.hammerhead",
"F.smoothhound.sharks",
"F.Southern.stingray",
"F.spinner.shark",
"M.spinner.shark")) %dopar% {
sink("log.txt", append = TRUE)
gbm.auto(expvar = expvars,
resvar = i,
samples = sharks,
grids = gridssummer,
shape = mobilebay,
lr = 0.0005,
bf = 0.8,
gaus = TRUE,
savegbm = FALSE,
BnW = FALSE,
simp = TRUE)
}
foreach(i = c("F.Atlantic.sharpnose.shark",
"M.Atlantic.sharpnose.shark",
"F.blacknose.shark",
#"M.blacknose.shark",
#"F.blacktip.shark",
#"M.blacktip.shark",
#"F.bull.shark",
#"M.bull.shark",
#"F.sandbar.shark",
"M.sandbar.shark",
"M.scalloped.hammerhead")) %dopar% {
#"F.smoothhound.sharks",
#"F.Southern.stingray",
#"F.spinner.shark",
# "M.spinner.shark")) %dopar% {
sink("log.txt", append = TRUE)
gbm.auto(expvar = expvars,
resvar = i,
samples = sharks,
grids = gridssummer,
shape = mobilebay,
lr = 0.0005,
bf = 0.8,
gaus = TRUE,
savegbm = FALSE,
BnW = FALSE,
simp = TRUE)
}
registerDoMC(16)
writeLines(c(""), "log.txt")
foreach(i = c(#"F.Atlantic.sharpnose.shark",
"M.Atlantic.sharpnose.shark",
"F.blacknose.shark",
"M.blacknose.shark",
"F.blacktip.shark",
"M.blacktip.shark",
"F.bull.shark",
"M.bull.shark",
"F.sandbar.shark",
"M.sandbar.shark",
"M.scalloped.hammerhead",
"F.smoothhound.sharks",
"F.Southern.stingray",
"F.spinner.shark",
"M.spinner.shark")) %dopar% {
sink("log.txt", append = TRUE)
gbm.auto(expvar = expvars,
resvar = i,
samples = sharks,
grids = gridsspring,
shape = mobilebay,
lr = 0.0005,
bf = 0.8,
gaus = TRUE,
savegbm = FALSE,
BnW = FALSE,
simp = TRUE)
}
setwd("/home/simon/Dropbox/PostDoc Work/Drymon Froeschke transect BRT/Gbm_auto_runs/PredictRuns/spring")
foreach(i = c(#"F.Atlantic.sharpnose.shark",
"M.Atlantic.sharpnose.shark",
"F.blacknose.shark",
"M.blacknose.shark",
"F.blacktip.shark",
"M.blacktip.shark",
"F.bull.shark",
"M.bull.shark",
"F.sandbar.shark",
"M.sandbar.shark",
"M.scalloped.hammerhead",
"F.smoothhound.sharks",
"F.Southern.stingray",
"F.spinner.shark",
"M.spinner.shark")) %dopar% {
sink("log.txt", append = TRUE)
gbm.auto(expvar = expvars,
resvar = i,
samples = sharks,
grids = gridsspring,
shape = mobilebay,
lr = 0.0005,
bf = 0.8,
gaus = TRUE,
savegbm = FALSE,
BnW = FALSE,
simp = TRUE)
}
foreach(i = c(#"F.Atlantic.sharpnose.shark",
"M.Atlantic.sharpnose.shark",
#"F.blacknose.shark",
#"M.blacknose.shark",
"F.blacktip.shark")) %dopar% {
#"M.blacktip.shark",
#"F.bull.shark",
#"M.bull.shark",
#"F.sandbar.shark",
#"M.sandbar.shark",
#"M.scalloped.hammerhead",
#"F.smoothhound.sharks",
#"F.Southern.stingray",
#"F.spinner.shark",
#"M.spinner.shark")) %dopar% {
sink("log.txt", append = TRUE)
gbm.auto(expvar = expvars,
resvar = i,
samples = sharks,
grids = gridsspring,
shape = mobilebay,
lr = 0.0005,
bf = 0.8,
gaus = TRUE,
savegbm = FALSE,
BnW = FALSE,
simp = TRUE)
}
# resvars[14] #check resvar name
# colnames(sharks)[39]
setwd("/home/simon/Dropbox/PostDoc Work/Drymon Froeschke transect BRT/Gbm_auto_runs/PredictRuns/autumn")
library(gbm.auto)
library(devtools)
install_github("SimonDedman/gbm.auto") # update gbm.auto to latest
library(gbm.auto)
gbm.auto(expvar = expvars,
resvar = "F.scalloped.hammerhead",
samples = sharks,
grids = gridsautumn,
shape = mobilebay,
lr = 0.0005,
BF = 0.65,
gaus = TRUE,
savegbm = FALSE,
BnW = FALSE,
simp = TRUE)
gbm.auto(expvar = expvars,
resvar = "F.scalloped.hammerhead",
samples = sharks,
grids = gridsautumn,
shape = mobilebay,
lr = 0.0005,
BF = 0.65,
gaus = TRUE,
savegbm = FALSE,
BnW = FALSE,
simp = F)
gbm.bfcheck(samples = sharks,
resvar = "F.scalloped.hammerhead")
gbm.auto(expvar = expvars,
resvar = "F.scalloped.hammerhead",
samples = sharks,
grids = gridsautumn,
shape = mobilebay,
lr = 0.0005,
BF = 0.7,
gaus = TRUE,
savegbm = FALSE,
BnW = FALSE,
simp = F)
gbm.auto(expvar = expvars,
resvar = "F.scalloped.hammerhead",
samples = sharks,
grids = gridsautumn,
shape = mobilebay,
lr = 0.0001,
BF = 0.7,
gaus = TRUE,
savegbm = FALSE,
BnW = FALSE,
simp = F)
gbm.auto(expvar = expvars,
resvar = "F.scalloped.hammerhead",
samples = sharks,
grids = gridsautumn,
shape = mobilebay,
lr = 0.001,
BF = 0.7,
gaus = TRUE,
savegbm = FALSE,
BnW = FALSE,
simp = F,
gaus = F)
gbm.auto(expvar = expvars,
resvar = "F.scalloped.hammerhead",
samples = sharks,
grids = gridsautumn,
shape = mobilebay,
lr = 0.001,
BF = 0.7,
gaus = F,
savegbm = FALSE,
BnW = FALSE,
simp = F)
#setwd("/home/simon/Dropbox/PostDoc Work/Drymon Froeschke transect BRT/Gbm_auto_runs/PredictRuns/spring")
setwd("C:/Users/simon/Dropbox/PostDoc Work/Drymon Froeschke transect BRT/Gbm_auto_runs/PredictRuns/spring")
setwd("/home/simon/Dropbox/PostDoc Work/Drymon Froeschke transect BRT/Gbm_auto_runs/PredictRuns/spring")
gbm.auto(expvar = expvars,
resvar = "F.scalloped.hammerhead",
samples = sharks,
grids = gridsspring,
shape = mobilebay,
lr = 0.001,
BF = 0.7,
gaus = F,
savegbm = FALSE,
BnW = FALSE,
simp = F)
setwd("/home/simon/Dropbox/PostDoc Work/Drymon Froeschke transect BRT/Gbm_auto_runs/PredictRuns/summer")
gbm.auto(expvar = expvars,
resvar = "F.scalloped.hammerhead",
samples = sharks,
grids = gridssummer,
shape = mobilebay,
lr = 0.001,
BF = 0.7,
gaus = F,
savegbm = FALSE,
BnW = FALSE,
simp = F)
setwd("/home/simon/Dropbox/PostDoc Work/Drymon Froeschke transect BRT/Gbm_auto_runs/PredictRuns/winter")
gbm.auto(expvar = expvars,
resvar = "F.scalloped.hammerhead",
samples = sharks,
grids = gridswinter,
shape = mobilebay,
lr = 0.001,
BF = 0.7,
gaus = F,
savegbm = FALSE,
BnW = FALSE,
simp = F)
library("devtools", lib.loc="~/R/win-library/3.5")
document()
