times <- as.character(mysamples$Time_Midpoint)
mysamples$Time_Midpoint <- sapply(times,decimateTime)
mysamples$Tidal_State_Phase = factor(mysamples$Tidal_State_Phase,
levels(mysamples$Tidal_State_Phase)[c("SL","RL","RH","SH","FH","FL")])
mysamples <- read.csv("BRUVS_Env&Bio_Data_HG_RB_SD_V070417.csv", header = TRUE, row.names = NULL)
decimateTime = function(time) {
time = as.numeric(unlist(strsplit(time, ":")))
time = time[1] * 60 + time[2] + time[3] / 60
return(time)}
times <- as.character(mysamples$Time_Midpoint)
mysamples$Time_Midpoint <- sapply(times,decimateTime)
mysamples$Tidal_State_Phase = factor(mysamples$Tidal_State_Phase, levels(mysamples$Tidal_State_Phase)[c("SL","RL","RH","SH","FH","FL")])
mysamples <- read.csv("BRUVS_Env&Bio_Data_HG_RB_SD_V070417.csv", header = TRUE, row.names = NULL)
decimateTime = function(time) {
time = as.numeric(unlist(strsplit(time, ":")))
time = time[1] * 60 + time[2] + time[3] / 60
return(time)}
times <- as.character(mysamples$Time_Midpoint)
mysamples$Time_Midpoint <- sapply(times,decimateTime)
mysamples$Tidal_State_Phase = factor(mysamples$Tidal_State_Phase, levels = c("SL","RL","RH","SH","FH","FL"))
setwd("Outputs")
setwd("Without LatLon")
setwd("TSnP_Join")
gbm.auto(samples = mysamples,
#expvar = expvar4,
expvar = expvar5,
#resvar = resvar,
resvar = 54, #only teleost until HG/RB decision, most defencible
lr = c(0.0000001))
gbm.bfcheck(samples = mysamples, resvar = 54)
binbars.df <- data.frame(var = rep(NA, length(expvar)),
rel.inf = rep(NA, length(expvar)))
binbars.df <- data.frame(var = rep(NA, length(expvar5)),
rel.inf = rep(NA, length(expvar5)))
View(binbars.df)
getwd()
setwd("MaxN_Teleosts")
getwd()
binbarstmp <- read.csv("Binary BRT Variable contributions.csv")
gausbarstmp <- read.csv("Gaussian BRT Variable contributions.csv") # temp container for Gaus bars
gausbars.df <- gausbarstmp
gausbars.df <- rbind(gausbars.df, gausbarstmp)
View(gausbars.df)
View(gausbars.df)
gausbars.df$var
gausbars.df$var$levels
levels.default(gausbars.df)
levels.default(gausbars.df$var)
gausbars.df[,"Var.avg"] <- levels.default(gausbars.df$var)
View(gausbars.df)
gausbars.df[1:length(expvar5),"Var.avg"] <- levels.default(gausbars.df$var)
gausbars.df <- binbars.df # blnk dataframes for bin & gaus bars data
gausbars.df <- gausbarstmp
gausbars.df <- rbind(gausbars.df, gausbarstmp)
gausbars.df[1:length(expvar5),"Var.avg"] <- levels.default(gausbars.df$var)
View(gausbars.df)
View(gausbars.df)
with(gausbars.df, tapply(rel.inf, var, mean))
gausbars.df[1:length(expvar),"Av.Inf"] <-
r1 <- with(gausbars.df, tapply(rel.inf, var, mean))
r1 <- with(gausbars.df, tapply(rel.inf, var, mean))
r1
gausbars.df[1:length(expvar5),"Av.Inf"] <- with(gausbars.df, tapply(rel.inf, var, mean))
gausbars.df[1:length(expvar5),"Var.variance"] <- levels.default(gausbars.df$var)
gausbars.df <- gausbarstmp
gausbars.df <- rbind(gausbars.df, gausbarstmp)
View(gausbars.df)
gausbars.df[1:length(expvar5),"Vars"] <- levels.default(gausbars.df$var)
gausbars.df[1:length(expvar5),"Av.Inf"] <- with(gausbars.df, tapply(rel.inf, var, mean))
gausbars.df[1:length(expvar5),"Inf.variance"] <- with(gausbars.df, tapply(rel.inf, var, var))
gausbars[1:length(expvar5),"Vars"] <- levels.default(gausbars.df$var)
gausbars <- data.frame(Vars = levels.default(gausbars.df$var),
Av.Inf = with(gausbars.df, tapply(rel.inf, var, mean)),
Inf.variance = with(gausbars.df, tapply(rel.inf, var, var)))
View(gausbars)
gausbars <- data.frame(Vars = levels.default(gausbars.df$var),
Av.Inf = with(gausbars.df, tapply(rel.inf, var, mean)),
Inf.variance = with(gausbars.df, tapply(rel.inf, var, var)),
row.names = F)
gausbars <- data.frame(Vars = levels.default(gausbars.df$var),
Av.Inf = with(gausbars.df, tapply(rel.inf, var, mean)),
Inf.variance = with(gausbars.df, tapply(rel.inf, var, var)),
row.names = NULL)
View(gausbars)
gausbars <- data.frame(Av.Inf = with(gausbars.df, tapply(rel.inf, var, mean)),
Inf.variance = with(gausbars.df, tapply(rel.inf, var, var)),
row.names = levels.default(gausbars.df$var))
getwd)()
getwd()
binbarstmp <- read.csv("Binary BRT Variable contributions.csv")
if (file.exists("Binary BRT Variable contributions.csv")) print "YAY" else print "NAY"
file.exists("Binary BRT Variable contributions.csv")
if (file.exists("Binary BRT Variable contributions.csv")) print "YAY"
if (file.exists("Binary BRT Variable contributions.csv")) print("YAY") else print("NAY")
source('~/Dropbox/Galway/Analysis/R/gbm.auto/R/gbm.loop.R')
e
getwd()
rm(list = ls())
setwd(../)
setwd("../")
getwd()
setwd("looptest")
setwd("/home/simon/Dropbox/PostDoc Work/Bimini BRUVs/") # set your own directory
mysamples <- read.csv("BRUVS_Env&Bio_Data_HG_RB_SD_V070417.csv", header = TRUE, row.names = NULL)
decimateTime = function(time) {
time = as.numeric(unlist(strsplit(time, ":")))
time = time[1] * 60 + time[2] + time[3] / 60
return(time)}
times <- as.character(mysamples$Time_Midpoint)
mysamples$Time_Midpoint <- sapply(times,decimateTime)
mysamples$Tidal_State_Phase = factor(mysamples$Tidal_State_Phase,
levels = c("SL","RL","RH","SH","FH","FL"))
expvar5 <- c(5,13,18:25)
setwd("Outputs")
setwd("Without LatLon")
setwd("TSnP_Join")
setwd("looptest")
gbm.loop(loops = 10,
savecsv = T,
varmap = F,
samples = mysamples,
expvar = expvar5,
resvar = 54,
lr = 0.0000001)
source('~/Dropbox/Galway/Analysis/R/gbm.auto/R/gbm.loop.R')
gbm.loop(loops = 10,
savecsv = T,
varmap = F,
samples = mysamples,
expvar = expvar5,
resvar = 54,
lr = 0.0000001)
source('~/Dropbox/Galway/Analysis/R/gbm.auto/R/gbm.loop.R')
getwd)()
getwd)()
getwd()
setwd("../")
setwd("../")
getwd()
gbm.loop(loops = 10,
savecsv = T,
varmap = F,
samples = mysamples,
expvar = expvar5,
resvar = 54,
lr = 0.0000001)
traceback()
source('~/Dropbox/Galway/Analysis/R/gbm.auto/R/gbm.loop.R')
getwd()
setwd("../")
setwd("../")
getwd()
gbm.loop(loops = 10,
savecsv = T,
varmap = F,
samples = mysamples,
expvar = expvar5,
resvar = 54,
lr = 0.0000001)
source('~/Dropbox/Galway/Analysis/R/gbm.auto/R/gbm.loop.R')
setwd("../")
setwd("../")
getwd()
setwd("TSnP_Join")
setwd("looptest")
gbm.loop(loops = 10,
savecsv = T,
varmap = F,
samples = mysamples,
expvar = expvar5,
resvar = 54,
lr = 0.0000001)
getwd()
gbm.loop(loops = 10,
savecsv = T,
varmap = F,
samples = mysamples,
expvar = expvar5,
resvar = 54,
lr = 0.0000001,
linesfiles = TRUE)
colnames(mysamples)[,expvar5]
colnames(mysamples)[expvar5]
source('~/Dropbox/Galway/Analysis/R/gbm.auto/R/gbm.loop.R')
getwd()
gbm.loop(loops = 10,
savecsv = T,
varmap = F,
samples = mysamples,
expvar = expvar5,
resvar = 54,
lr = 0.0000001,
linesfiles = TRUE)
traceback()
source('~/Dropbox/Galway/Analysis/R/gbm.auto/R/gbm.loop.R')
getwd()
setwd("/home/simon/Dropbox/PostDoc Work/Bimini BRUVs/") # set your own directory
setwd("Outputs")
setwd("Without LatLon")
setwd("TSnP_Join")
setwd("looptest")
gbm.loop(loops = 10,
savecsv = T,
varmap = F,
samples = mysamples,
expvar = expvar5,
resvar = 54,
lr = 0.0000001,
linesfiles = TRUE)
traceback()
source('~/Dropbox/Galway/Analysis/R/gbm.auto/R/gbm.loop.R')
getwd()
setwd("../")
setwd("../")
getwd()
gbm.loop(loops = 10,
savecsv = T,
varmap = F,
samples = mysamples,
expvar = expvar5,
resvar = 54,
lr = 0.0000001,
linesfiles = TRUE,
simp = FALSE)
traceback()
source('~/Dropbox/Galway/Analysis/R/gbm.auto/R/gbm.loop.R')
getwd()
setwd("/home/simon/Dropbox/PostDoc Work/Bimini BRUVs/") # set your own directory
setwd("Outputs")
setwd("Without LatLon")
setwd("TSnP_Join")
setwd("looptest")
gbm.loop(loops = 10,
savecsv = T,
varmap = F,
samples = mysamples,
expvar = expvar5,
resvar = 54,
lr = 0.0000001,
linesfiles = TRUE,
simp = FALSE)
source('~/Dropbox/Galway/Analysis/R/gbm.auto/R/gbm.loop.R')
getwd()
setwd("/home/simon/Dropbox/PostDoc Work/Bimini BRUVs/Outputs/Without LatLon/TSnP_Join/looptest")
gbm.loop(loops = 10,
savecsv = T,
varmap = F,
samples = mysamples,
expvar = expvar5,
resvar = 54,
lr = 0.0000001,
linesfiles = TRUE,
simp = FALSE)
debugSource('~/Dropbox/Galway/Analysis/R/gbm.auto/R/gbm.loop.R')
debug()
debugSource('~/Dropbox/Galway/Analysis/R/gbm.auto/R/gbm.loop.R')
browser()
exit()
stop()
browser()
debugger()
source('~/Dropbox/Galway/Analysis/R/gbm.auto/R/gbm.loop.R')
getwd()
setwd("/home/simon/Dropbox/PostDoc Work/Bimini BRUVs/Outputs/Without LatLon/TSnP_Join/looptest")
gbm.loop(loops = 10,
savecsv = T,
varmap = F,
samples = mysamples,
expvar = expvar5,
resvar = 54,
lr = 0.0000001,
linesfiles = TRUE,
simp = FALSE)
View(gaustmp_Month)
View(gausline_Month)
i
1+i
testdf <- data.frame(x = 1:10, y = 2:11)
View(testdf)
testdf <- cbind(testdf, z = 3:12)
View(testdf)
assign(testdf, cbind(testdf, aa = 4:13))
assign(paste0("test","df"), cbind(testdf, aa = 4:13))
View(testdf)
assign(paste0("test","df"), cbind(get(paste0("test","df")), bb = 5:14))
View(testdf)
source('~/Dropbox/Galway/Analysis/R/gbm.auto/R/gbm.loop.R')
assign(paste0("test","df"), cbind(get(paste0("test","df")), paste0("c", "c") = 6:15))
paste0("c", "c")
bb
assign(paste0("test","df"), cbind(get(paste0("test","df")), get(paste0("c", "c")) = 6:15))
get(paste0("c", "c"))
paste0("c", "c")
source('~/Dropbox/Galway/Analysis/R/gbm.auto/R/gbm.loop.R')
getwd()
gbm.loop(loops = 10,
savecsv = T,
varmap = F,
samples = mysamples,
expvar = expvar5,
resvar = 54,
lr = 0.0000001,
linesfiles = TRUE,
simp = FALSE)
View(gausline_Month)
colnames(paste0("gausline_", k))[1 + i]
colnames(paste0("gausline_", k))
paste0("gausline_", k)
colnames(paste0("gausline_", k))
colnames(get(paste0("gausline_", k)))
colnames(get(paste0("gausline_", k)))
colnames(get(paste0("gausline_", k)))[1 + i]
paste0("Loop_", i)
colnames(get(paste0("gausline_", k)))[1 + i] <- paste0("Loop_", i)
colnames(get(paste0("gausline_", k)))[1 + i] <- as.character(paste0("Loop_", i))
setNames(get(paste0("gausline_", k)))[1 + i] <- paste0("Loop_", i)
setNames(get(paste0("gausline_", k)))[,1 + i] <- paste0("Loop_", i)
source('~/Dropbox/Galway/Analysis/R/gbm.auto/R/gbm.loop.R')
getwd()
setwd("/home/simon/Dropbox/PostDoc Work/Bimini BRUVs/Outputs/Without LatLon/TSnP_Join/looptest")
setwd("/home/simon/Dropbox/PostDoc Work/Bimini BRUVs/Outputs/Without LatLon/TSnP_Join/looptest")
gbm.loop(loops = 10,
savecsv = T,
varmap = F,
samples = mysamples,
expvar = expvar5,
resvar = 54,
lr = 0.0000001,
linesfiles = TRUE,
simp = FALSE)
source('~/Dropbox/Galway/Analysis/R/gbm.auto/R/gbm.loop.R')
setwd("/home/simon/Dropbox/PostDoc Work/Bimini BRUVs/Outputs/Without LatLon/TSnP_Join/looptest")
gbm.loop(loops = 10,
savecsv = T,
varmap = F,
samples = mysamples,
expvar = expvar5,
resvar = 54,
lr = 0.0000001,
linesfiles = TRUE,
simp = FALSE)
source('~/Dropbox/Galway/Analysis/R/gbm.auto/R/gbm.loop.R')
setwd("/home/simon/Dropbox/PostDoc Work/Bimini BRUVs/Outputs/Without LatLon/TSnP_Join/looptest")
gbm.loop(loops = 10,
savecsv = T,
varmap = F,
samples = mysamples,
expvar = expvar5,
resvar = 54,
lr = 0.0000001,
linesfiles = TRUE,
simp = FALSE)
source('~/Dropbox/Galway/Analysis/R/gbm.auto/R/gbm.loop.R')
setwd("/home/simon/Dropbox/PostDoc Work/Bimini BRUVs/Outputs/Without LatLon/TSnP_Join/looptest")
gbm.loop(loops = 10,
savecsv = T,
varmap = F,
samples = mysamples,
expvar = expvar5,
resvar = 54,
lr = 0.0000001,
linesfiles = TRUE,
simp = FALSE)
View(gausline_Month)
paste0("gausline_", m)
get(paste0("gausline_", m))[, (2:(1 + loops))]
View(gausline_Month)
View(gausline_SG_Coverage)
apply(get(paste0("gausline_", m))[, (2:(1 + loops))], MARGIN = 1, min)
apply(get(paste0("gausline_", m))[, (2:(1 + loops))], MARGIN = 1, mean)
apply(get(paste0("gausline_", m))[, (2:(1 + loops))], MARGIN = 1, var)
paste0("gausline_", m)[,"MinLine"]
paste0("gausline_", m)
get(paste0("gausline_", m))[,"MinLine"]
assign(get(paste0("gausline_", m))[,"MinLine"], apply(get(paste0("gausline_", m))[, (2:(1 + loops))], MARGIN = 1, min))
assign(get(paste0("gausline_", m))[,12], apply(get(paste0("gausline_", m))[, (2:(1 + loops))], MARGIN = 1, min))
length(get(paste0("gausline_", m)))
length(get(paste0("gausline_", m)))[,1]
get(paste0("gausline_", m))
length(get(paste0("gausline_", m))[,1]
length(get(paste0("gausline_", m))[,1])
length(get(paste0("gausline_", m))[,1])
assign(get(paste0("gausline_", m)), cbind(get(paste0("gausline_", m)),
"MinLine" = rep(NA, length(get(paste0("gausline_", m))[,1]))))
assign(paste0("gausline_", m), cbind(get(paste0("gausline_", m)),
"MinLine" = rep(NA, length(get(paste0("gausline_", m))[,1]))))
View(gausline_Month)
assign(get(paste0("gausline_", m))[,"MinLine"], apply(get(paste0("gausline_", m))[, (2:(1 + loops))], MARGIN = 1, min))
assign(paste0("gausline_", m)[,"MinLine"], apply(get(paste0("gausline_", m))[, (2:(1 + loops))], MARGIN = 1, min))
assign(paste0("gausline_", m), cbind(get(paste0("gausline_", m)),
"MinLine" = apply(get(paste0("gausline_", m))[, (2:(1 + loops))], MARGIN = 1, min)))
View(gausline_Month)
source('~/Dropbox/Galway/Analysis/R/gbm.auto/R/gbm.loop.R')
setwd("/home/simon/Dropbox/PostDoc Work/Bimini BRUVs/Outputs/Without LatLon/TSnP_Join/looptest")
gbm.loop(loops = 10,
savecsv = T,
varmap = F,
samples = mysamples,
expvar = expvar5,
resvar = 54,
lr = 0.0000001,
linesfiles = TRUE,
simp = FALSE)
setwd("/home/simon/Dropbox/PostDoc Work/Bimini BRUVs/Outputs/Without LatLon/TSnP_Join/looptest")
gbm.loop(loops = 10,
savecsv = T,
varmap = F,
samples = mysamples,
expvar = expvar5,
resvar = 54,
lr = 0.0000001,
linesfiles = TRUE,
simp = FALSE)
getwd()
gbm.loop(loops = 10,
savecsv = T,
varmap = F,
samples = mysamples,
expvar = expvar5,
resvar = 54,
lr = 0.0000001,
linesfiles = TRUE,
simp = FALSE)
gbm.plot
sgtmp <- read.csv("GausLineLoop_SG_Coverage.csv")
View(sgtmp)
colnames(sgtmp)[1]
plot(sgtmp[,1],
sgtmp[,"AvLine"],
type = "l",
xlab = colnames(sgtmp)[1],
ylab = "Marginal Effect",
main = "")
line(sgtmp[,1], sgtmp[,"MinLine"])
lines(sgtmp[,1], sgtmp[,"MinLine"])
lines(sgtmp[,1], sgtmp[,"MaxLine"])
lines(sgtmp[,1], sgtmp[,"VarLine"])
plot(sgtmp[,1],
sgtmp[,"MaxLine"],
type = "l",
xlab = colnames(sgtmp)[1],
ylab = "Marginal Effect",
main = "")
lines(sgtmp[,1], sgtmp[,"MinLine"])
lines(sgtmp[,1], sgtmp[,"AvLine"])
plot(sgtmp[,1],
sgtmp[,"MaxLine"],
type = "l",
xlab = colnames(sgtmp)[1],
ylab = "Marginal Effect",
main = "",
yasx = "r")
lines(sgtmp[,1], sgtmp[,"MinLine"])
lines(sgtmp[,1], sgtmp[,"AvLine"])
plot(sgtmp[,1],
sgtmp[,"MaxLine"],
type = "l",
xlab = colnames(sgtmp)[1],
ylab = "Marginal Effect",
main = "",
yasx = "r")
lines(sgtmp[,1], sgtmp[,"MinLine"], col = "red")
lines(sgtmp[,1], sgtmp[,"AvLine"], col = "blue")
legend("topleft", legend = c("Max","Av.","Min"), col = c("black","blue","red"),
lty = 1, pch = "-")
setwd("/home/simon/Dropbox/PostDoc Work/Bimini BRUVs/Outputs/Without LatLon/TSnP_Join/looptest")
gbm.loop(loops = 10,
savecsv = T,
varmap = F,
samples = mysamples,
expvar = expvar5,
resvar = 54,
lr = 0.0000001,
linesfiles = TRUE,
simp = FALSE)
gbm.loop(loops = 10,
savecsv = T,
varmap = F,
samples = mysamples,
expvar = expvar5,
resvar = 54,
lr = 0.0000001,
linesfiles = TRUE,
simp = FALSE)
source('~/Dropbox/Galway/Analysis/R/gbm.auto/R/gbm.loop.R')
setwd("/home/simon/Dropbox/PostDoc Work/Bimini BRUVs/Outputs/Without LatLon/TSnP_Join/looptest")
gbm.loop(loops = 10,
savecsv = T,
varmap = F,
samples = mysamples,
expvar = expvar5,
resvar = 54,
lr = 0.0000001,
linesfiles = TRUE,
simp = FALSE)
source('~/Dropbox/Galway/Analysis/R/gbm.auto/R/gbm.loop.R')
source('~/Dropbox/Galway/Analysis/R/gbm.auto/R/gbm.loop.R')
setwd("/home/simon/Dropbox/PostDoc Work/Bimini BRUVs/Outputs/Without LatLon/TSnP_Join/looptest")
gbm.loop(loops = 10,
savecsv = T,
varmap = F,
samples = mysamples,
expvar = expvar5,
resvar = 54,
lr = 0.0000001,
linesfiles = TRUE,
simp = FALSE)
source('~/Dropbox/Galway/Analysis/R/gbm.auto/R/gbm.loop.R')
source('~/Dropbox/Galway/Analysis/R/gbm.auto/R/gbm.loop.R')
source('~/Dropbox/Galway/Analysis/R/gbm.auto/R/gbm.loop.R')
devtools()
document()
